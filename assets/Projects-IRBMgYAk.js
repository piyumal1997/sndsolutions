import{j as e,r,F as f,h as N,i as C,f as k,L as P}from"./index-WnLAA-_7.js";import{s as S}from"./supabase-C99NjHl9.js";const E=({project:t,onClick:o})=>{const l=t.images.length>0?t.images[0]:"/placeholder.jpg";return e.jsxs("div",{onClick:o,className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-2xl transition duration-300",children:[e.jsx("img",{src:l,alt:t.title,className:"w-full h-64 object-cover hover:scale-105 transition duration-500"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-1",children:t.title}),e.jsx("p",{className:"text-md text-gray-800",children:t.description}),e.jsx("p",{className:"text-md text-green-600 mt-3 font-medium",children:t.type.replace("-"," ").toUpperCase()})]})]})},L=({project:t,onClose:o})=>{const[l,x]=r.useState(0),i=()=>{x(a=>a>0?a-1:t.images.length-1)},g=()=>{x(a=>a<t.images.length-1?a+1:0)},c=a=>{a.key==="ArrowLeft"&&i(),a.key==="ArrowRight"&&g(),a.key==="Escape"&&o()};return r.useEffect(()=>(document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)),[]),e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 px-4 py-8 overflow-y-auto",onClick:o,role:"dialog","aria-modal":"true","aria-labelledby":"project-title",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full mx-auto relative shadow-2xl overflow-hidden flex flex-col",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute top-3 right-3 text-gray-50 hover:text-gray-900 text-3xl transition-colors duration-200 z-10","aria-label":"Close modal",children:e.jsx(f,{icon:N})}),e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"overflow-hidden max-h-[80vh] rounded-t-2xl",children:e.jsx("img",{src:t.images[l]||"/placeholder.jpg",alt:`${t.title} - Image ${l+1}`,className:"w-full h-auto object-contain transition-opacity duration-300 ease-in-out"},l)}),t.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:i,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/80 px-3 py-2 rounded-full hover:bg-white transition-all duration-200","aria-label":"Previous image",children:e.jsx(f,{icon:C})}),e.jsx("button",{onClick:g,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/80 px-3 py-2 rounded-full hover:bg-white transition-all duration-200","aria-label":"Next image",children:e.jsx(f,{icon:k})}),e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.images.map((a,n)=>e.jsx("button",{onClick:()=>x(n),className:`w-2 h-2 rounded-full transition-colors duration-200 ${n===l?"bg-green-900":"bg-gray-300"}`,"aria-label":`Go to image ${n+1}`},n))})]})]}),e.jsxs("div",{className:"p-6 text-center md:text-left flex-grow overflow-y-auto",children:[e.jsx("h2",{id:"project-title",className:"text-2xl font-bold text-green-900 mb-2",children:t.title}),e.jsx("p",{className:"text-lg text-gray-900 mb-1",children:t.description}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.details}),e.jsx("p",{className:"text-md font-semibold text-gray-900 mt-2",children:t.type.replace("-"," ").toUpperCase()})]})]})})},I="/assets/projects-bg-C3zS5Q13.jpg",T=()=>{const[t,o]=r.useState([]),[l,x]=r.useState([]),[i,g]=r.useState(""),[c,a]=r.useState("all"),[n,h]=r.useState(1),[b,j]=r.useState(null),p=6;r.useEffect(()=>{(async()=>{const{data:d,error:m}=await S.from("projects").select("*").order("date",{ascending:!1});m?console.error("Error fetching projects:",m):(o(d||[]),x(d||[]))})()},[]),r.useEffect(()=>{let s=t;if(i.trim()){const d=i.toLowerCase();s=s.filter(m=>m.title.toLowerCase().includes(d)||m.description.toLowerCase().includes(d))}c!=="all"&&(s=s.filter(d=>d.type===c)),x(s),h(1)},[i,c,t]);const y=n*p,w=y-p,v=l.slice(w,y),u=Math.ceil(l.length/p);return e.jsxs("main",{className:"pt-0 bg-white",children:[e.jsxs("section",{className:"relative h-96 pt-0",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:`url(${I})`}}),e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsx("div",{className:"relative container mx-auto px-6 h-full flex items-center justify-center text-center text-white",children:e.jsxs("div",{className:"max-w-5xl",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 drop-shadow-2xl",children:"Our Projects"}),e.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto drop-shadow-md",children:"Explore our completed installations and engineering achievements across Sri Lanka"})]})})]}),e.jsx("section",{className:"py-12 md:py-16 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-6 md:gap-8",children:[e.jsxs("div",{className:"w-full md:flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search by title or description...",value:i,onChange:s=>g(s.target.value),className:"w-full px-5 py-3.5 bg-white border border-gray-300 rounded-lg focus:border-green-600 focus:ring-1 focus:ring-green-600 focus:outline-none transition shadow-sm"})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Type"}),e.jsxs("select",{value:c,onChange:s=>a(s.target.value),className:"w-full px-5 py-3.5 bg-white border border-gray-300 rounded-lg focus:border-green-600 focus:ring-1 focus:ring-green-600 focus:outline-none transition shadow-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"residential-solar",children:"Residential Solar"}),e.jsx("option",{value:"industrial-solar",children:"Industrial Solar"}),e.jsx("option",{value:"automation",children:"Automation"}),e.jsx("option",{value:"engineering",children:"Engineering"})]})]})]})})})}),e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:l.length===0?e.jsx("p",{className:"text-center text-xl text-gray-600 py-12",children:"No projects match your criteria."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10 max-w-7xl mx-auto",children:v.map(s=>e.jsx(E,{project:s,onClick:()=>j(s)},s.id))}),u>1&&e.jsxs("div",{className:"flex justify-center items-center gap-6 md:gap-8 mt-12 md:mt-16",children:[e.jsx("button",{onClick:()=>h(s=>Math.max(s-1,1)),disabled:n===1,className:`px-6 md:px-8 py-3 md:py-4 bg-green-600 text-white rounded-lg font-medium 
                             disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition`,children:"Previous"}),e.jsxs("span",{className:"text-base md:text-lg font-medium text-gray-700",children:["Page ",n," of ",u]}),e.jsx("button",{onClick:()=>h(s=>Math.min(s+1,u)),disabled:n===u,className:`px-6 md:px-8 py-3 md:py-4 bg-green-600 text-white rounded-lg font-medium 
                             disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition`,children:"Next"})]})]})})}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:"Interested in a Custom Solution?"}),e.jsx("p",{className:"text-xl text-gray-700 max-w-2xl mx-auto mb-8",children:"Contact us today for a free consultation on your next project."}),e.jsx(P,{to:"/contact",className:"inline-block bg-green-600 text-white px-8 py-4 rounded-full font-medium text-lg hover:bg-green-700 shadow-md transition",children:"Get in Touch"})]})}),b&&e.jsx(L,{project:b,onClose:()=>j(null)})]})};export{T as default};
