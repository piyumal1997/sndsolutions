import{r as d,t as ee,j as t,k as v,F as A,u as te,v as re,w as ne,x as oe}from"./index-D-xOlNKU.js";var B=function(){return B=Object.assign||function(e){for(var n,i=1,c=arguments.length;i<c;i++)for(var p in n=arguments[i])Object.prototype.hasOwnProperty.call(n,p)&&(e[p]=n[p]);return e},B.apply(this,arguments)},H,ae=function(e){var n;e?(function(i){if(i)for(;i.lastChild;)i.lastChild.remove()})(typeof e=="string"?document.getElementById(e):e):(n=document.querySelector(".grecaptcha-badge"))&&n.parentNode&&document.body.removeChild(n.parentNode)},se=function(e,n){ae(n),window.___grecaptcha_cfg=void 0;var i=document.querySelector("#"+e);i&&i.remove(),(function(){var c=document.querySelector('script[src^="https://www.gstatic.com/recaptcha/releases"]');c&&c.remove()})()},ie=function(e){var n=e.render,i=e.onLoadCallbackName,c=e.language,p=e.onLoad,w=e.useRecaptchaNet,a=e.useEnterprise,h=e.scriptProps,r=h===void 0?{}:h,j=r.nonce,y=j===void 0?"":j,u=r.defer,C=u!==void 0&&u,b=r.async,R=b!==void 0&&b,E=r.id,P=E===void 0?"":E,M=r.appendTo,x=P||"google-recaptcha-v3";if((function(s){return!!document.querySelector("#"+s)})(x))p();else{var $=(function(s){return"https://www."+(s.useRecaptchaNet?"recaptcha.net":"google.com")+"/recaptcha/"+(s.useEnterprise?"enterprise.js":"api.js")})({useEnterprise:a,useRecaptchaNet:w}),m=document.createElement("script");m.id=x,m.src=$+"?render="+n+(n==="explicit"?"&onload="+i:"")+(c?"&hl="+c:""),y&&(m.nonce=y),m.defer=!!C,m.async=!!R,m.onload=p,(M==="body"?document.body:document.getElementsByTagName("head")[0]).appendChild(m)}},K=function(e){console.warn(e)};(function(e){e.SCRIPT_NOT_AVAILABLE="Recaptcha script is not available"})(H||(H={}));var J=d.createContext({executeRecaptcha:function(){throw Error("GoogleReCaptcha Context has not yet been implemented, if you are using useGoogleReCaptcha hook, make sure the hook is called inside component wrapped by GoogleRecaptchaProvider")}});J.Consumer;function le(e){var n=e.reCaptchaKey,i=e.useEnterprise,c=i!==void 0&&i,p=e.useRecaptchaNet,w=p!==void 0&&p,a=e.scriptProps,h=e.language,r=e.container,j=e.children,y=d.useState(null),u=y[0],C=y[1],b=d.useRef(n),R=JSON.stringify(a),E=JSON.stringify(r?.parameters);d.useEffect((function(){if(n){var x=a?.id||"google-recaptcha-v3",$=a?.onLoadCallbackName||"onRecaptchaLoadCallback";return window[$]=function(){var m=c?window.grecaptcha.enterprise:window.grecaptcha,s=B({badge:"inline",size:"invisible",sitekey:n},r?.parameters||{});b.current=m.render(r?.element,s)},ie({render:r?.element?"explicit":n,onLoadCallbackName:$,useEnterprise:c,useRecaptchaNet:w,scriptProps:a,language:h,onLoad:function(){if(window&&window.grecaptcha){var m=c?window.grecaptcha.enterprise:window.grecaptcha;m.ready((function(){C(m)}))}else K("<GoogleRecaptchaProvider /> "+H.SCRIPT_NOT_AVAILABLE)}}),function(){se(x,r?.element)}}K("<GoogleReCaptchaProvider /> recaptcha key not provided")}),[c,w,R,E,h,n,r?.element]);var P=d.useCallback((function(x){if(!u||!u.execute)throw new Error("<GoogleReCaptchaProvider /> Google Recaptcha has not been loaded");return u.execute(b.current,{action:x})}),[u,b]),M=d.useMemo((function(){return{executeRecaptcha:u?P:void 0,container:r?.element}}),[P,u,r?.element]);return ee.createElement(J.Provider,{value:M},j)}var ce=function(){return d.useContext(J)};function Z(e,n){return e(n={exports:{}},n.exports),n.exports;}var l=typeof Symbol=="function"&&Symbol.for,V=l?Symbol.for("react.element"):60103,Y=l?Symbol.for("react.portal"):60106,k=l?Symbol.for("react.fragment"):60107,q=l?Symbol.for("react.strict_mode"):60108,L=l?Symbol.for("react.profiler"):60114,F=l?Symbol.for("react.provider"):60109,_=l?Symbol.for("react.context"):60110,D=l?Symbol.for("react.async_mode"):60111,z=l?Symbol.for("react.concurrent_mode"):60111,T=l?Symbol.for("react.forward_ref"):60112,O=l?Symbol.for("react.suspense"):60113,de=l?Symbol.for("react.suspense_list"):60120,I=l?Symbol.for("react.memo"):60115,G=l?Symbol.for("react.lazy"):60116,ue=l?Symbol.for("react.block"):60121,me=l?Symbol.for("react.fundamental"):60117,pe=l?Symbol.for("react.responder"):60118,fe=l?Symbol.for("react.scope"):60119;function g(e){if(typeof e=="object"&&e!==null){var n=e.$$typeof;switch(n){case V:switch(e=e.type){case D:case z:case k:case L:case q:case O:return e;default:switch(e=e&&e.$$typeof){case _:case T:case G:case I:case F:return e;default:return n}}case Y:return n}}}function Q(e){return g(e)===z}var ge={AsyncMode:D,ConcurrentMode:z,ContextConsumer:_,ContextProvider:F,Element:V,ForwardRef:T,Fragment:k,Lazy:G,Memo:I,Portal:Y,Profiler:L,StrictMode:q,Suspense:O,isAsyncMode:function(e){return Q(e)||g(e)===D},isConcurrentMode:Q,isContextConsumer:function(e){return g(e)===_},isContextProvider:function(e){return g(e)===F},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===V},isForwardRef:function(e){return g(e)===T},isFragment:function(e){return g(e)===k},isLazy:function(e){return g(e)===G},isMemo:function(e){return g(e)===I},isPortal:function(e){return g(e)===Y},isProfiler:function(e){return g(e)===L},isStrictMode:function(e){return g(e)===q},isSuspense:function(e){return g(e)===O},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===k||e===z||e===L||e===q||e===O||e===de||typeof e=="object"&&e!==null&&(e.$$typeof===G||e.$$typeof===I||e.$$typeof===F||e.$$typeof===_||e.$$typeof===T||e.$$typeof===me||e.$$typeof===pe||e.$$typeof===fe||e.$$typeof===ue)},typeOf:g},o=Z((function(e,n){})),W=(o.AsyncMode,o.ConcurrentMode,o.ContextConsumer,o.ContextProvider,o.Element,o.ForwardRef,o.Fragment,o.Lazy,o.Memo,o.Portal,o.Profiler,o.StrictMode,o.Suspense,o.isAsyncMode,o.isConcurrentMode,o.isContextConsumer,o.isContextProvider,o.isElement,o.isForwardRef,o.isFragment,o.isLazy,o.isMemo,o.isPortal,o.isProfiler,o.isStrictMode,o.isSuspense,o.isValidElementType,o.typeOf,Z((function(e){e.exports=ge}))),xe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},X={};X[W.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},X[W.Memo]=xe;const he="/assets/contact-bg-Dt12jX-V.jpg",ye=()=>{const[e,n]=d.useState(!1),[i,c]=d.useState(null),[p,w]=d.useState(!1),[a,h]=d.useState({name:"",email:"",phone:"",inquiry_type:"",message:""}),[r,j]=d.useState({}),{executeRecaptcha:y}=ce(),u=d.useRef(null),[C,b]=d.useState(null),[R,E]=d.useState(!1),P="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3960.785978322663!2d79.85866831477286!3d6.916668395002!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae2591a713c14b9%3A0x1a9c3a7d0b7e6c6e!2sColombo%2003%2C%20Sri%20Lanka!5e0!3m2!1sen!2slk!4v1705480000000";d.useEffect(()=>{const s=new IntersectionObserver(N=>{N.forEach(f=>{f.isIntersecting&&(b(P),s.unobserve(f.target))})},{rootMargin:"150px"});return u.current&&s.observe(u.current),()=>{u.current&&s.unobserve(u.current)}},[]);const M=()=>E(!0),x=s=>{const{name:N,value:f}=s.target;h(S=>({...S,[N]:f})),j(S=>({...S,[N]:""})),c(null)},$=()=>{const s={};return a.name.trim()||(s.name="Name is required"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(s.email="Email is invalid"):s.email="Email is required",a.phone&&!/^\+?\d{10,15}$/.test(a.phone.replace(/\s/g,""))&&(s.phone="Invalid phone number (10-15 digits)"),a.inquiry_type||(s.inquiry_type="Please select inquiry type"),a.message.trim()||(s.message="Message is required"),s},m=async s=>{s.preventDefault(),c(null);const N=$();if(Object.keys(N).length>0){j(N);return}if(!y){c("reCAPTCHA not loaded. Please refresh the page.");return}w(!0);try{console.log("[Frontend] Generating reCAPTCHA token...");const f=await y("inquiryForm");if(console.log("[Frontend] reCAPTCHA token generated:",f.substring(0,30)+"..."),console.log("[Frontend] Token length:",f.length),!f||f.length<50)throw new Error("Failed to generate reCAPTCHA token");const S=await fetch("https://riflxhbxduomczyszbmw.supabase.co/functions/v1/submit-inquiry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,recaptcha_token:f})}),U=await S.text();if(!S.ok)throw console.error("[Frontend] Edge Function error:",S.status,U),new Error(U||"Submission failed");n(!0),h({name:"",email:"",phone:"",inquiry_type:"",message:""})}catch(f){console.error("[Frontend] Submission error:",f),c(f.message||"Something went wrong. Please try again.")}finally{w(!1)}};return t.jsxs("main",{className:"pt-0 bg-white",children:[t.jsxs("section",{className:"relative h-96 pt-0",children:[t.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:`url(${he})`}}),t.jsx("div",{className:"absolute inset-0 bg-black/50"}),t.jsx("div",{className:"relative container mx-auto px-6 h-full flex items-center justify-center text-center text-white",children:t.jsxs("div",{className:"max-w-5xl",children:[t.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 drop-shadow-2xl",children:"Contact Us"}),t.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto drop-shadow-md",children:"Get in touch for any inquiry â€“ free consultation island-wide."})]})})]}),t.jsx("section",{className:"py-16 md:py-20 bg-gray-50",children:t.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:t.jsxs("div",{className:"flex flex-col lg:flex-row gap-12 lg:gap-16 max-w-7xl mx-auto",children:[t.jsx("div",{className:"w-full lg:w-1/2 order-2 lg:order-1",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 lg:p-10",children:[t.jsxs("div",{className:"text-center mb-10",children:[t.jsx("img",{src:v.logo||"/logo-placeholder.png",alt:`${v.name} Logo`,className:"h-20 mx-auto mb-6 object-contain"}),t.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:v.name})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx(A,{icon:te,className:"text-green-600 text-2xl mt-1"}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium text-gray-900",children:"Head Office"}),t.jsx("p",{className:"text-gray-700",children:v.address})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(A,{icon:re,className:"text-green-600 text-2xl"}),t.jsx("a",{href:`tel:${v.phone.replace(/\s/g,"")}`,className:"text-gray-700 hover:text-green-600 transition",children:v.phone})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(A,{icon:ne,className:"text-green-600 text-2xl"}),t.jsx("a",{href:`mailto:${v.email}`,className:"text-gray-700 hover:text-green-600 transition",children:v.email})]})]}),t.jsx("div",{className:"mt-12",children:e?t.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-8 text-center",children:[t.jsx(A,{icon:oe,className:"text-green-600 text-6xl mb-4"}),t.jsx("h3",{className:"text-2xl font-bold text-green-700 mb-3",children:"Thank You!"}),t.jsx("p",{className:"text-lg text-gray-700",children:"Your inquiry has been sent successfully. We will respond within 24 hours."})]}):t.jsxs("form",{onSubmit:m,className:"space-y-6",children:[i&&t.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-lg text-center",children:i}),t.jsx("input",{type:"text",name:"name",placeholder:"Your Name *",value:a.name,onChange:x,required:!0,className:"w-full px-5 py-4 bg-gray-50 border border-gray-300 rounded-lg focus:border-green-600 focus:outline-none transition"}),r.name&&t.jsx("p",{className:"text-red-500 text-sm -mt-2",children:r.name}),t.jsx("input",{type:"email",name:"email",placeholder:"Your Email *",value:a.email,onChange:x,required:!0,className:"w-full px-5 py-4 bg-gray-50 border border-gray-300 rounded-lg focus:border-green-600 focus:outline-none transition"}),r.email&&t.jsx("p",{className:"text-red-500 text-sm -mt-2",children:r.email}),t.jsx("input",{type:"tel",name:"phone",placeholder:"Your Phone (optional)",value:a.phone,onChange:x,className:"w-full px-5 py-4 bg-gray-50 border border-gray-300 rounded-lg focus:border-green-600 focus:outline-none transition"}),r.phone&&t.jsx("p",{className:"text-red-500 text-sm -mt-2",children:r.phone}),t.jsxs("select",{name:"inquiry_type",value:a.inquiry_type,onChange:x,required:!0,className:"w-full px-5 py-4 bg-gray-50 border border-gray-300 rounded-lg focus:border-green-600 focus:outline-none transition",children:[t.jsx("option",{value:"",children:"Select Inquiry Type *"}),t.jsx("option",{value:"Home Solar Solutions",children:"Home Solar Solutions"}),t.jsx("option",{value:"Industry Solar Solutions",children:"Industry Solar Solutions"}),t.jsx("option",{value:"Automation & Control Systems",children:"Automation & Control Systems"}),t.jsx("option",{value:"General Engineering",children:"General Engineering"}),t.jsx("option",{value:"Other",children:"Other"})]}),r.inquiry_type&&t.jsx("p",{className:"text-red-500 text-sm -mt-2",children:r.inquiry_type}),t.jsx("textarea",{name:"message",rows:"5",placeholder:"Your Message *",value:a.message,onChange:x,required:!0,className:"w-full px-5 py-4 bg-gray-50 border border-gray-300 rounded-lg focus:border-green-600 focus:outline-none transition resize-none"}),r.message&&t.jsx("p",{className:"text-red-500 text-sm -mt-2",children:r.message}),t.jsx("button",{type:"submit",disabled:p,className:`w-full py-4 rounded-lg font-medium text-lg transition ${p?"bg-green-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 text-white"}`,children:p?"Sending...":"Send Message"})]})})]})}),t.jsxs("div",{className:"w-full lg:w-1/2 order-1 lg:order-2",children:[t.jsx("h2",{className:"text-3xl font-bold text-center mb-8 text-gray-900",children:"Our Location"}),t.jsx("div",{ref:u,className:"rounded-2xl overflow-hidden shadow-2xl h-96 lg:h-[500px] relative bg-white",children:C?t.jsxs(t.Fragment,{children:[t.jsx("iframe",{src:C,width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Company Location",onLoad:M}),!R&&t.jsx("div",{className:"absolute inset-0 bg-white/80 flex items-center justify-center",children:t.jsx("p",{className:"text-lg text-gray-700",children:"Loading map..."})})]}):t.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center text-gray-600",children:t.jsx("p",{className:"text-xl",children:"Map loads when in view"})})})]})]})})})]})},ve=()=>t.jsx(le,{reCaptchaKey:"6Lfxv1gsAAAAAIUJRR_rG5ejpfC-Soh7ga0CMquB",children:t.jsx(ye,{})});export{ve as default};
